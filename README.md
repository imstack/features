# Features

## Keys

Each feature is assigned a unique key.

## Current Settings

```
[
    { 
        key: 'donation'
      , emails: 'client,admin'
    }
  , { 
        key: 'flower' 
      , emails: 'client,team'
    }
  , { 
        key: 'book' 
      , emails: 'client,team'
    }
  , { 
        key: 'gcard'
      , emails: 'client,team'
    }
]
```

## Emails & templates

Emails templates `names` correspond to the emails type `client, team or admin` followed by the feature name. 

Given the current settings, for the `flower` feature, 2 emails will be sent with the following template names `client-flower` & `team-flower`. So make sure those template exists in Sendgrid, for each language, otherwise an error will be thrown.

Each tempate has acces to the full order generated by the feature :

```
{
  "_id": "BJB-HTmHXGS",
  "cat": "2019-07-22T14:10:05.173Z",
  "cat_f": "22/07/2019 - 16:10 (Paris)",
  "shipping": {
    "name": "Eglise Saint Sébastien",
    "address": "Place Dr Joseph Chevillon, 13190 Allauch, France",
    "date": "2019-08-15T08:00:00.000Z",
    "date_f": "15/08/2019 - 10:00",
    "amount": 1590,
    "amount_f": "15.90€"
  },
  "invoice": {
    "name": "Bruno Hervé",
    "address": "25, boulevard Aristide Briand",
    "city": "Le Cannet",
    "zipcode": "06110",
    "vat": "",
    "phone": "0698736050",
    "email": "bruno.h@gmail.com"
  },
  "item": {
    "name": "Souvenir",
    "product": "6P04"
  },
  "tx": {
    "amount": 16080,
    "amount_f": "160.80€",
    "currency": "eur",
    "pi_id": "pi_1Ez2CyDvcFOuP8N2XYHxCD7v",
    "pm_id": "pm_1Ez2CxDvcFOuP8N24EejJg4f",
    "ch_id": "ch_1Ez2DHDvcFOuP8N2jJiZVBrn",
    "ca_id": "acct_1EuxorG8voAk1bsZ"
  },
  "meta": {
    "message": "un joli message ❤"
  }
}
```

